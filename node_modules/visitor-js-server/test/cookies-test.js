import { test } from "tape";
import cookies from "../src/cookies";

const amcvCookie = "-179204249%7CMCIDTS%7C17043%7CMCMID%7C67165637736332133982173426459255729868" +
        "%7CMCAAMLH-1473084544%7C9%7CMCAAMB-1473084544%7CNRX38WO0n5BH8Th-nqAG_A%7CMCOPTOUT-1472486944s" +
        "%7CNONE%7CMCAID%7C2BD9A36D85078621-6000010D20286FCF";

const valuesToExtractFromAmcvCookie = [
    "MCMID",
    "MCAAMB",
    "MCAAMLH"
];

test("cookies should implement expected API", (t) => {
    t.ok(cookies.parseValuesFromAmcvCookie, "Cookies should expose `parseValuesFromAmcvCookie`");
    t.end();
});

test("calling parseValuesFromAmcvCookie with 3 valid values", (t) => {
    var values = cookies.parseValuesFromAmcvCookie(amcvCookie, valuesToExtractFromAmcvCookie);
    t.equal(values.MCMID, "67165637736332133982173426459255729868");
    t.equal(values.MCAAMLH, "9");
    t.equal(values.MCAAMB, "NRX38WO0n5BH8Th-nqAG_A");
    t.end();
});
