"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _visitorJsShared=require("@adobe-mcid/visitor-js-shared"),_amcvCookie=require("./amcv-cookie"),_targetAdapter=require("./target-adapter"),_targetAdapter2=_interopRequireDefault(_targetAdapter),_visitorPayload=require("./visitor-payload"),_visitorPayload2=_interopRequireDefault(_visitorPayload),_utils=require("./utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var CONSUMER_ID_BASE="payload:",AMCV_PREFIX="AMCV_";function Visitor(){var a=0>=arguments.length||void 0===arguments[0]?(0,_utils.throwError)("Visitor requires an Org ID!"):arguments[0];(0,_utils.isOrgIDInvalid)(a)&&(0,_utils.throwError)("Invalid Org ID: it must contain 13 digits and end with `@AdobeOrg`");var b={},c=function c(e){return b=Object.assign({},b,e)},d=function d(){var e=0>=arguments.length||void 0===arguments[0]?(0,_utils.throwError)("consumerID is required"):arguments[0];e=""+CONSUMER_ID_BASE+e;var f=(0,_visitorJsShared.generateSupplementalID)();return c({sdid:f,consumerID:e}),f};this.generatePayload=function(_ref){var e=_ref.consumerID,f=_ref.amcvCookie,g=d(e),h=(0,_amcvCookie.pickValues)(f,["MCMID","MCAAMB","MCAAMLH"]),_b=b,i=_b.customerIDs;return(0,_visitorPayload2.default)({sdid:g,amcvValues:h,customerIDs:i},_targetAdapter2.default)},this.setCustomerIDs=function(){var e=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];c({customerIDs:e})},this.getState=function(){return _defineProperty({},a,b)},this.getCookieName=function(){return AMCV_PREFIX+a}}Visitor.AuthState=_visitorJsShared.AuthState;exports.default=Visitor;module.exports=exports["default"];