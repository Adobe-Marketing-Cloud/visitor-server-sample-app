/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2016 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property 
* laws, including trade secret and copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/var generateRandomID=require("./generateRandomID");function generateSDID(){return generateRandomID(1)}// This factory will generate a SupplementalDataID object that exposes 2 methods:
// - getID: Main method that generates/retrieves a supplemental data ID.
// - getState: Returns the internal state of the object.
module.exports=function(b){b=b||{};var c=b.supplementalDataIDCurrent,d=b.supplementalDataIDCurrentConsumed||{},e=b.supplementalDataIDLast,f=b.supplementalDataIDLastConsumed||{};return{getID:function(h,i){c||i||(c=generateSDID());// Default to using the current supplemental-data ID
var j=c;// If we have the last supplemental-data ID that has not been consumed by this consumer...
return e&&!f[h]?(j=e,f[h]=!0):j&&(d[h]&&(e=c,f=d,c=j=i?"":generateSDID(),d={}),j&&(d[h]=!0)),j},getState:function(){return{supplementalDataIDCurrent:c,supplementalDataIDCurrentConsumed:d,supplementalDataIDLast:e,supplementalDataIDLastConsumed:f}}}};